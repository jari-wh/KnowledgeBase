### GDB学习

启动：gdb 可执行文件名

#### gdb基本命令1

| 命令                 | 描述                                                   |
| -------------------- | ------------------------------------------------------ |
| backtrace（或bt）    | 查看各级函数调用及参数                                 |
| finish               | 连续运行到当前函数返回为止，然后停下来等待命令         |
| frame（或f）  帧编号 | 选择栈帧                                               |
| info（或i） locals   | 查看当前栈帧局部变量的值                               |
| list（或l）          | 列出源代码，接着上次的位置往下列，每次列10行           |
| list 行号            | 列出从第几行开始的源代码                               |
| list 函数名          | 列出某个函数的源代码                                   |
| next（或n）          | 执行下一条语句                                         |
| print（或p）         | 打印表达式的值，通过表达式可以修改变量的值或者调用函数 |
| quie（或q）          | 退出gdb调试环境                                        |
| set var              | 修改变量的值                                           |
| start                | 开始执行程序，停止main函数第一行语句等待命令           |
| step（或s）          | 执行下一行语句，如有函数调用则进入到函数中             |

#### gdb基本命令2

| 命令                       | 描述                                     |
| -------------------------- | ---------------------------------------- |
| break（或b） 行号          | 在某一行设置断点                         |
| break 函数名               | 在某个函数开头设置断点                   |
| break...if...              | 设置条件断点                             |
| continue（或c）            | 从当前位置开始连续运行程序               |
| delete breakpoints 断点号  | 删除断点                                 |
| display 变量名             | 跟踪查看某个变量，每次停下来都显示它的值 |
| disable breakpoints 断点号 | 禁用断点                                 |
| enable 断点号              | 启用断点                                 |
| info（或i） breakpoints    | 查看当前设置了那些断点                   |
| run（或r）                 | 从头开始连续运行程序                     |
| undisplay 跟踪显示号       | 取消跟踪显示                             |

#### gdb基本命令3

| 命令                    | 描述                                                         |
| ----------------------- | ------------------------------------------------------------ |
| watch                   | 设置观察点                                                   |
| info（或i） watchpoints | 查看当前设置了哪些观察点                                     |
| x                       | 从某个位置开始打印存储单元的内容，全部当成字节来看，而不区分哪个字节属于哪个变量 |

#### gdb基本命令4

| 命令               | 描述                                  |
| ------------------ | ------------------------------------- |
| disassemble        | 反汇编当前函数                        |
| disassemble 函数名 | 反汇编指定函数                        |
| si                 | 逐条指令单步调试                      |
| info registers     | 显示所有寄存器的当前值                |
| p $esp             | 打印esp寄存器的值                     |
| x/20 $esp          | 查看内存中esp指定地址开始的20个32位数 |

gcc的-g选项生成调试信息

编译器加上优化选项后，实际的执行顺序可能由于优化而与源代码顺序不同，因此利用调试器跟踪运行时，有时会执行到莫名其妙的地方，造成混乱。